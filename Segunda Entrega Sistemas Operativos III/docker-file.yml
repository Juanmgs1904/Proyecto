FROM php:8-apache

RUN yum update -y && \
    yum install -y epel-release && \
    yum install -y http://rpms.remirepo.net/enterprise/remi-release-7.rpm && \
    yum install -y yum-utils && \
    yum-config-manager --enable remi-php80 && \
    yum install -y php php-cli php-common php-devel php-mbstring php-mysqlnd php-pdo php-xml php-zip && \
    yum clean all

RUN yum install -y httpd && \
    yum clean all

RUN echo "ServerName localhost" >> /etc/httpd/conf/httpd.conf && \
    sed -i 's/Listen 80/Listen 8080/g' /etc/httpd/conf/httpd.conf && \
    sed -i 's/AllowOverride None/AllowOverride All/g' /etc/httpd/conf/httpd.conf && \
    sed -i 's/#ServerName www.example.com:80/ServerName localhost/g' /etc/httpd/conf/httpd.conf

ADD https://github.com/Juanmgs1904/Proyecto/tree/main/APIS /var/www/html/

EXPOSE 8080
